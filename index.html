<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VendaOS Simulation</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Launch Page Styles */
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
    }

    .launch-container {
      max-width: 600px;
      padding: 40px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
    }

    h1 {
      font-size: 3rem;
      margin-bottom: 20px;
    }

    p {
      font-size: 1.2rem;
      margin-bottom: 30px;
      opacity: 0.9;
    }

    .start-btn {
      background: white;
      color: #764ba2;
      border: none;
      padding: 15px 40px;
      font-size: 1.2rem;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .start-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    }

    .features {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      margin-top: 40px;
    }

    .feature {
      background: rgba(255,255,255,0.1);
      padding: 10px 15px;
      border-radius: 10px;
      font-size: 0.9rem;
    }

    /* Phone Simulation Styles - Will be shown after clicking Start */
    #phoneSimulation {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      z-index: 1000;
    }

    #phone {
      width: 375px;
      height: 667px;
      background: #111;
      border-radius: 40px;
      position: relative;
      overflow: hidden;
      border: 10px solid #222;
      box-shadow: 0 0 50px rgba(0,0,0,0.5);
      margin: 20px auto;
    }
    
    /* All other styles from previous implementation */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
    
    /* Booting Screen */
    #bootingScreen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    
    .boot-logo {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 50px;
    }
    
    .boot-logo-icon {
      font-size: 80px;
      font-weight: bold;
      color: #4CD964;
      margin-bottom: 20px;
    }
    
    .boot-progress-container {
      width: 80%;
      height: 4px;
      background: rgba(255,255,255,0.1);
      border-radius: 2px;
      margin-bottom: 20px;
    }
    
    .boot-progress-bar {
      height: 100%;
      width: 0;
      background: #4CD964;
      border-radius: 2px;
      transition: width 0.2s ease;
    }
    
    .boot-status {
      color: rgba(255,255,255,0.7);
      font-size: 14px;
    }
    
    /* Setup Screen */
    #setupScreen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      display: none;
      flex-direction: column;
      justify-content: space-between;
      padding: 40px 20px;
      z-index: 900;
    }
    
    .setup-header {
      text-align: center;
      margin-top: 40px;
    }
    
    .setup-title {
      font-size: 28px;
      margin-bottom: 10px;
    }
    
    .setup-subtitle {
      color: rgba(255,255,255,0.7);
      font-size: 16px;
    }
    
    .setup-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 0 20px;
    }
    
    .setup-step {
      display: none;
    }
    
    .setup-step.active {
      display: block;
    }
    
    .setup-option {
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      cursor: pointer;
      transition: background 0.2s;
    }
    
    .setup-option:hover {
      background: rgba(255,255,255,0.2);
    }
    
    .setup-option.selected {
      background: rgba(76, 217, 100, 0.2);
      border: 1px solid #4CD964;
    }
    
    .setup-option-icon {
      font-size: 24px;
      margin-right: 15px;
      width: 40px;
      height: 40px;
      background: rgba(255,255,255,0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .setup-option-text {
      flex: 1;
    }
    
    .setup-option-title {
      font-size: 18px;
      margin-bottom: 5px;
    }
    
    .setup-option-subtitle {
      color: rgba(255,255,255,0.7);
      font-size: 14px;
    }
    
    .setup-footer {
      display: flex;
      justify-content: space-between;
    }
    
    .setup-button {
      background: rgba(255,255,255,0.1);
      color: white;
      border: none;
      border-radius: 20px;
      padding: 12px 25px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.2s;
    }
    
    .setup-button.primary {
      background: #4CD964;
    }
    
    .setup-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .setup-button:hover:not(:disabled) {
      background: rgba(255,255,255,0.2);
    }
    
    .setup-button.primary:hover:not(:disabled) {
      background: #3ac753;
    }
    
    /* Lock Screen */
    #lockScreen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to bottom, #000428, #004e92);
      display: none;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
      padding: 60px 20px 40px;
      z-index: 1100;
    }
    
    .lock-time {
      font-size: 60px;
      font-weight: 200;
      margin-bottom: 5px;
    }
    
    .lock-date {
      font-size: 18px;
      opacity: 0.8;
    }
    
    .lock-notifications {
      width: 100%;
      max-height: 200px;
      overflow-y: auto;
      margin-bottom: 20px;
    }
    
    .lock-notification {
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      padding: 10px;
      margin-bottom: 10px;
      backdrop-filter: blur(10px);
    }
    
    .lock-notification-app {
      font-weight: bold;
      margin-bottom: 5px;
    }
    
    .unlock-area {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .unlock-hint {
      margin-bottom: 15px;
      font-size: 14px;
      opacity: 0.7;
    }
    
    .unlock-slider {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: rgba(255,255,255,0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      cursor: pointer;
      transition: transform 0.3s;
    }
    
    .unlock-slider:active {
      transform: scale(0.95);
    }
    
    /* Phone Content Container */
    #phoneContent {
      width: 100%;
      height: 100%;
      position: relative;
      display: none;
    }
    
    /* Status Bar */
    #statusBar {
      height: 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
      font-size: 12px;
      background: rgba(0,0,0,0.5);
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 300;
    }
    
    .status-left, .status-right {
      display: flex;
      align-items: center;
    }
    
    .status-time {
      font-weight: bold;
    }
    
    .status-icon {
      margin-left: 5px;
    }
    
    /* Status bar clickable areas */
    .status-click-left {
      position: absolute;
      top: 0;
      left: 0;
      width: 100px;
      height: 30px;
      cursor: pointer;
      z-index: 350;
    }
    
    .status-click-right {
      position: absolute;
      top: 0;
      right: 0;
      width: 100px;
      height: 30px;
      cursor: pointer;
      z-index: 350;
    }
    
    /* Home Screen */
    #homeScreen {
      width: 100%;
      height: 100%;
      padding-top: 30px;
      padding-bottom: 80px;
      display: flex;
      flex-direction: column;
      background-size: cover;
      background-position: center;
      background-image: url('https://images.unsplash.com/photo-1506318137071-a8e063b4bec0?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
    }
    
    .app-grid {
      flex: 1;
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      grid-gap: 20px;
      padding: 20px;
      align-content: start;
    }
    
    .app-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      position: relative;
    }
    
    .app-icon-image {
      width: 60px;
      height: 60px;
      background: rgba(255,255,255,0.1);
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 30px;
      margin-bottom: 5px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    
    .app-icon-name {
      font-size: 12px;
      text-align: center;
      color: white;
      text-shadow: 0 1px 2px rgba(0,0,0,0.5);
    }
    
    .dock {
      padding: 15px 20px;
      background: rgba(255,255,255,0.1);
      border-radius: 30px;
      margin: 0 20px 20px;
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      display: flex;
      justify-content: space-around;
    }
    
    .dock .app-icon-image {
      width: 50px;
      height: 50px;
      border-radius: 12px;
    }
    
    /* App Window */
    #appWindow {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #111;
      z-index: 200;
      display: none;
      flex-direction: column;
      transform: translateY(100%);
      transition: transform 0.3s ease;
      border-radius: 20px 20px 0 0;
    }
    
    #appWindow.active {
      transform: translateY(0);
    }
    
    .app-header {
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      padding: 0 20px;
    }
    
    .app-title {
      font-weight: bold;
      font-size: 18px;
    }
    
    .app-close {
      position: absolute;
      left: 50%;
      bottom: 10px;
      transform: translateX(-50%);
      width: 40px;
      height: 5px;
      background: rgba(255,255,255,0.3);
      border-radius: 3px;
      cursor: pointer;
    }
    
    #appContent {
      flex: 1;
      overflow-y: auto;
      padding: 0 20px 20px;
    }
    
    /* Notification Center */
    #notificationCenter {
      position: absolute;
      top: 30px;
      left: 0;
      width: 100%;
      height: calc(100% - 30px);
      background: rgba(0,0,0,0.9);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      z-index: 250;
      display: none;
      flex-direction: column;
      padding: 20px;
      transform: translateY(-100%);
      transition: transform 0.3s ease;
    }
    
    #notificationCenter.active {
      transform: translateY(0);
    }
    
    .notification-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .notification-title {
      font-size: 24px;
      font-weight: bold;
    }
    
    .notification-clear {
      color: #4CD964;
      cursor: pointer;
    }
    
    .notification-item {
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 10px;
    }
    
    .notification-app {
      font-weight: bold;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
    }
    
    .notification-app-icon {
      width: 20px;
      height: 20px;
      background: rgba(255,255,255,0.2);
      border-radius: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 8px;
      font-size: 12px;
    }
    
    .notification-time {
      color: rgba(255,255,255,0.5);
      font-size: 12px;
      margin-top: 5px;
    }
    
    /* Control Center */
    #controlCenter {
      position: absolute;
      top: 30px;
      right: 0;
      width: 80%;
      max-width: 300px;
      height: calc(100% - 30px);
      background: rgba(0,0,0,0.9);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      z-index: 250;
      display: none;
      flex-direction: column;
      padding: 20px;
      transform: translateX(100%);
      transition: transform 0.3s ease;
      border-radius: 20px 0 0 0;
    }
    
    #controlCenter.active {
      transform: translateX(0);
    }
    
    .control-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .control-title {
      font-size: 20px;
      font-weight: bold;
    }
    
    .control-close {
      font-size: 20px;
      cursor: pointer;
    }
    
    .control-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-gap: 15px;
      margin-bottom: 20px;
    }
    
    .control-item {
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      padding: 15px 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
    }
    
    .control-item-icon {
      font-size: 24px;
      margin-bottom: 5px;
    }
    
    .control-item-name {
      font-size: 12px;
    }
    
    .control-slider {
      width: 100%;
      margin-bottom: 20px;
    }
    
    /* Settings */
    .settings-section {
      margin-bottom: 25px;
    }
    
    .settings-section-title {
      color: rgba(255,255,255,0.5);
      font-size: 14px;
      margin-bottom: 10px;
      padding-left: 10px;
    }
    
    .settings-item {
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
    }
    
    .settings-item-content {
      display: flex;
      align-items: center;
    }
    
    .settings-item-icon {
      font-size: 20px;
      margin-right: 15px;
      width: 30px;
      text-align: center;
    }
    
    .settings-item-title {
      font-size: 16px;
      margin-bottom: 3px;
    }
    
    .settings-item-subtitle {
      color: rgba(255,255,255,0.5);
      font-size: 12px;
    }
    
    .toggle-switch {
      width: 50px;
      height: 30px;
      background: rgba(255,255,255,0.2);
      border-radius: 15px;
      position: relative;
      cursor: pointer;
    }
    
    .toggle-switch.on {
      background: #4CD964;
    }
    
    .toggle-switch::after {
      content: '';
      position: absolute;
      width: 26px;
      height: 26px;
      background: white;
      border-radius: 50%;
      top: 2px;
      left: 2px;
      transition: transform 0.2s;
    }
    
    .toggle-switch.on::after {
      transform: translateX(20px);
    }
    
    /* Background Options */
    #backgroundOptions {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      z-index: 400;
      display: none;
      justify-content: center;
      align-items: center;
    }
    
    .background-container {
      background: #222;
      width: 90%;
      max-width: 300px;
      border-radius: 15px;
      overflow: hidden;
      padding: 20px;
    }
    
    .background-title {
      font-size: 20px;
      margin-bottom: 20px;
      text-align: center;
    }
    
    .background-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      grid-gap: 15px;
    }
    
    .background-option {
      height: 100px;
      border-radius: 10px;
      background-size: cover;
      background-position: center;
      cursor: pointer;
      border: 2px solid transparent;
    }
    
    .background-option.selected {
      border-color: #4CD964;
    }
    
    /* Browser Styles */
    .browser-header {
      display: flex;
      padding: 10px;
      background: rgba(0,0,0,0.5);
      border-radius: 10px;
      margin-bottom: 15px;
    }
    
    .browser-url {
      flex: 1;
      background: rgba(255,255,255,0.1);
      border: none;
      border-radius: 15px;
      padding: 8px 15px;
      color: white;
    }
    
    .browser-go {
      background: #4CD964;
      border: none;
      border-radius: 15px;
      padding: 8px 15px;
      color: white;
      margin-left: 10px;
      cursor: pointer;
    }
    
    .browser-content {
      width: 100%;
      height: 400px;
      background: white;
      border-radius: 10px;
      overflow: hidden;
    }
    
    .browser-iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
    
    /* App Specific Styles */
    .messages-list {
      display: flex;
      flex-direction: column;
      padding-bottom: 70px;
    }
    
    .message {
      background: rgba(255,255,255,0.1);
      border-radius: 15px;
      padding: 10px 15px;
      margin-bottom: 10px;
      max-width: 80%;
      align-self: flex-start;
    }
    
    .message.me {
      background: #4CD964;
      align-self: flex-end;
    }
    
    .message-input {
      position: fixed;
      bottom: 70px;
      left: 20px;
      right: 20px;
      display: flex;
    }
    
    .message-input input {
      flex: 1;
      background: rgba(255,255,255,0.1);
      border: none;
      border-radius: 20px;
      padding: 12px 20px;
      color: white;
    }
    
    .message-input button {
      background: #4CD964;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      margin-left: 10px;
      color: white;
      cursor: pointer;
    }
    
    /* Phone Styles */
    .phone-keypad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-gap: 15px;
      margin-top: 20px;
    }
    
    .phone-key {
      background: rgba(255,255,255,0.1);
      border-radius: 50%;
      width: 60px;
      height: 60px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      margin: 0 auto;
    }
    
    .phone-key-number {
      font-size: 24px;
    }
    
    .phone-key-letters {
      font-size: 10px;
      color: rgba(255,255,255,0.7);
    }
    
    /* App Store Styles */
    .app-store {
      padding: 15px;
    }
    
    .app-store-search {
      width: 100%;
      padding: 10px 15px;
      background: rgba(255,255,255,0.1);
      border: none;
      border-radius: 10px;
      color: white;
      margin-bottom: 20px;
    }
    
    .app-store-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      grid-gap: 15px;
    }
    
    .app-store-item {
      background: rgba(255,255,255,0.1);
      border-radius: 15px;
      padding: 15px;
      text-align: center;
    }
    
    .app-store-icon {
      font-size: 40px;
      margin-bottom: 10px;
    }
    
    .app-store-name {
      font-weight: bold;
      margin-bottom: 5px;
    }
    
    .app-store-developer {
      font-size: 12px;
      color: rgba(255,255,255,0.7);
      margin-bottom: 10px;
    }
    
    .app-store-get {
      background: #4CD964;
      border: none;
      border-radius: 15px;
      padding: 5px 15px;
      color: white;
      cursor: pointer;
    }
    
    /* Files App Styles */
    .files-container {
      padding: 15px;
    }
    
    .files-storage {
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 20px;
    }
    
    .files-storage-bar {
      height: 5px;
      background: rgba(255,255,255,0.2);
      border-radius: 5px;
      margin: 10px 0;
      overflow: hidden;
    }
    
    .files-storage-used {
      height: 100%;
      width: 65%;
      background: #4CD964;
      border-radius: 5px;
    }
    
    .files-storage-text {
      font-size: 12px;
      color: rgba(255,255,255,0.7);
    }
    
    .files-folders {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      grid-gap: 15px;
    }
    
    .files-folder {
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      cursor: pointer;
    }
    
    .files-folder-icon {
      font-size: 30px;
      margin-bottom: 10px;
    }
    
    /* Music App Styles */
    .music-player {
      text-align: center;
      padding: 20px;
    }
    
    .music-cover {
      width: 200px;
      height: 200px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      margin: 0 auto 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 50px;
    }
    
    .music-info {
      margin-bottom: 20px;
    }
    
    .music-title {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 5px;
    }
    
    .music-artist {
      font-size: 16px;
      color: rgba(255,255,255,0.7);
    }
    
    .music-progress {
      width: 100%;
      height: 3px;
      background: rgba(255,255,255,0.2);
      border-radius: 3px;
      margin: 20px 0;
      overflow: hidden;
    }
    
    .music-progress-bar {
      height: 100%;
      width: 30%;
      background: #4CD964;
    }
    
    .music-time {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      color: rgba(255,255,255,0.7);
      margin-bottom: 20px;
    }
    
    .music-controls {
      display: flex;
      justify-content: center;
      gap: 30px;
    }
    
    .music-control {
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
    }
    
    .music-play {
      background: #4CD964;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    /* Camera App Styles */
    .camera-container {
      height: 100%;
      display: flex;
      flex-direction: column;
    }
    
    .camera-viewfinder {
      flex: 1;
      background: #000;
      position: relative;
      overflow: hidden;
    }
    
    .camera-preview {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .camera-controls {
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 30px;
    }
    
    .camera-shutter {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: white;
      border: 3px solid rgba(255,255,255,0.5);
      cursor: pointer;
    }
    
    .camera-switch {
      font-size: 24px;
      cursor: pointer;
    }
    
    .camera-modes {
      position: absolute;
      top: 10px;
      left: 0;
      width: 100%;
      display: flex;
      justify-content: center;
      gap: 15px;
    }
    
    .camera-mode {
      background: rgba(0,0,0,0.5);
      color: white;
      border: none;
      border-radius: 15px;
      padding: 5px 15px;
      font-size: 14px;
      cursor: pointer;
    }
    
    .camera-mode.active {
      background: #4CD964;
    }
    
    /* Photos App Styles */
    .photos-container {
      padding: 15px;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-gap: 5px;
    }
    
    .photo-item {
      aspect-ratio: 1;
      background-size: cover;
      background-position: center;
      cursor: pointer;
    }
    
    .photo-viewer {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      z-index: 500;
      display: none;
      flex-direction: column;
    }
    
    .photo-viewer-header {
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
      background: rgba(0,0,0,0.5);
      z-index: 510;
    }
    
    .photo-viewer-image {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }
    
    .photo-viewer-image img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }
    
    .photo-viewer-footer {
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.5);
      z-index: 510;
    }
    
    /* Contacts App Styles */
    .contacts-container {
      padding: 15px;
    }
    
    .contacts-search {
      width: 100%;
      padding: 10px 15px;
      background: rgba(255,255,255,0.1);
      border: none;
      border-radius: 10px;
      color: white;
      margin-bottom: 20px;
    }
    
    .contacts-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .contact-item {
      display: flex;
      align-items: center;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
    }
    
    .contact-item:hover {
      background: rgba(255,255,255,0.1);
    }
    
    .contact-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(255,255,255,0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 15px;
      font-size: 18px;
    }
    
    .contact-name {
      font-weight: bold;
    }
    
    /* Calendar App Styles */
    .calendar-container {
      padding: 15px;
    }
    
    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .calendar-month {
      font-size: 18px;
      font-weight: bold;
    }
    
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      grid-gap: 5px;
    }
    
    .calendar-day-header {
      text-align: center;
      font-size: 12px;
      color: rgba(255,255,255,0.7);
      padding: 5px 0;
    }
    
    .calendar-day {
      aspect-ratio: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 5px;
      cursor: pointer;
    }
    
    .calendar-day.empty {
      background: transparent;
      cursor: default;
    }
    
    .calendar-day.today {
      background: #4CD964;
      font-weight: bold;
    }
    
    .calendar-day.event {
      position: relative;
    }
    
    .calendar-day.event::after {
      content: '';
      position: absolute;
      bottom: 5px;
      left: 50%;
      transform: translateX(-50%);
      width: 5px;
      height: 5px;
      background: #4CD964;
      border-radius: 50%;
    }
    
    .calendar-events {
      margin-top: 20px;
    }
    
    .calendar-event {
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      padding: 10px;
      margin-bottom: 10px;
    }
    
    .calendar-event-time {
      font-size: 12px;
      color: rgba(255,255,255,0.7);
    }
    
    .calendar-event-title {
      font-weight: bold;
      margin-top: 5px;
    }
    
    /* App Switcher Styles */
    #appSwitcher {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.9);
      backdrop-filter: blur(20px);
      z-index: 300;
      display: none;
      flex-direction: column;
      justify-content: flex-end;
      padding-bottom: 50px;
    }
    
    .app-switcher-cards {
      display: flex;
      overflow-x: auto;
      gap: 15px;
      padding: 0 20px;
      margin-bottom: 30px;
    }
    
    .app-switcher-card {
      min-width: 250px;
      height: 400px;
      background: #111;
      border-radius: 15px;
      overflow: hidden;
      position: relative;
    }
    
    .app-switcher-screenshot {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .app-switcher-close {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 25px;
      height: 25px;
      background: rgba(0,0,0,0.5);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    
    .app-switcher-done {
      background: rgba(255,255,255,0.1);
      color: white;
      border: none;
      border-radius: 20px;
      padding: 12px 25px;
      margin: 0 auto;
      cursor: pointer;
    }
    
    /* Battery App Styles */
    .battery-container {
      padding: 20px;
      text-align: center;
    }
    
    .battery-icon {
      font-size: 100px;
      margin-bottom: 20px;
      color: #4CD964;
    }
    
    .battery-level {
      font-size: 30px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    
    .battery-status {
      color: rgba(255,255,255,0.7);
      margin-bottom: 30px;
    }
    
    .battery-modes {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 30px;
    }
    
    .battery-mode {
      background: rgba(255,255,255,0.1);
      border: none;
      border-radius: 10px;
      padding: 10px 15px;
      color: white;
      cursor: pointer;
    }
    
    .battery-mode.active {
      background: #4CD964;
    }
    
    .battery-stats {
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      padding: 15px;
      text-align: left;
    }
    
    .battery-stat {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
    }
    
    /* Dark Mode */
    body.dark-mode {
      background: #111;
    }
    
    body.dark-mode #phone {
      background: #000;
    }
    
    /* Color Themes */
    body.theme-blue {
      --accent-color: #007AFF;
    }
    
    body.theme-purple {
      --accent-color: #5856D6;
    }
    
    body.theme-red {
      --accent-color: #FF2D55;
    }
    
    body.theme-orange {
      --accent-color: #FF9500;
    }
    
    /* Login Modal */
    #loginModal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      z-index: 400;
      display: none;
      justify-content: center;
      align-items: center;
    }
    
    .login-container {
      background: #222;
      width: 90%;
      max-width: 300px;
      border-radius: 15px;
      overflow: hidden;
      padding: 20px;
      text-align: center;
    }
    
    .login-title {
      font-size: 20px;
      margin-bottom: 20px;
    }
    
    .login-input {
      width: 100%;
      padding: 12px;
      margin-bottom: 15px;
      border: none;
      border-radius: 8px;
      background: rgba(255,255,255,0.1);
      color: white;
      font-size: 16px;
    }
    
    .login-button {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 8px;
      background: #4CD964;
      color: white;
      font-size: 16px;
      cursor: pointer;
      margin-bottom: 15px;
    }
    
    .login-divider {
      margin: 20px 0;
      color: rgba(255,255,255,0.3);
      display: flex;
      align-items: center;
    }
    
    .login-divider::before,
    .login-divider::after {
      content: '';
      flex: 1;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    .login-divider::before {
      margin-right: 10px;
    }
    
    .login-divider::after {
      margin-left: 10px;
    }
    
    .google-login {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 8px;
      background: #4285F4;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }
    
    .google-icon {
      margin-right: 10px;
      font-size: 20px;
    }
    
    /* Touch area for swipe gestures */
    .touch-area {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100px;
      z-index: 350;
    }
    
    /* New styles for enhanced features */
    /* App Folders */
    .app-folder {
      position: relative;
    }
    
    .folder-icon {
      width: 60px;
      height: 60px;
      background: rgba(255,255,255,0.2);
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 30px;
      margin-bottom: 5px;
    }
    
    .folder-contents {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.9);
      backdrop-filter: blur(20px);
      border-radius: 20px;
      padding: 15px;
      display: none;
      grid-template-columns: repeat(3, 1fr);
      grid-gap: 10px;
      z-index: 100;
    }
    
    .folder-header {
      grid-column: 1 / -1;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .folder-title {
      font-weight: bold;
    }
    
    .folder-close {
      cursor: pointer;
    }
    
    /* Live Widgets */
    .widget {
      background: rgba(255,255,255,0.1);
      border-radius: 15px;
      padding: 15px;
      margin: 10px;
      backdrop-filter: blur(10px);
      cursor: pointer;
    }
    
    .weather-widget {
      display: flex;
      align-items: center;
    }
    
    .weather-icon {
      font-size: 40px;
      margin-right: 15px;
    }
    
    .weather-info {
      flex: 1;
    }
    
    .calendar-widget {
      padding: 10px;
    }
    
    .calendar-widget-title {
      font-weight: bold;
      margin-bottom: 10px;
    }
    
    .calendar-widget-event {
      font-size: 12px;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
    }
    
    .calendar-widget-event-time {
      color: rgba(255,255,255,0.7);
      margin-right: 10px;
    }
    
    /* Privacy Dashboard */
    .privacy-dashboard {
      padding: 15px;
    }
    
    .privacy-item {
      display: flex;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    .privacy-item-icon {
      font-size: 20px;
      margin-right: 15px;
      width: 30px;
      text-align: center;
    }
    
    /* Split Screen Mode */
    .split-screen {
      display: flex;
      height: 100%;
    }
    
    .split-screen-app {
      flex: 1;
      border-right: 1px solid rgba(255,255,255,0.1);
    }
    
    /* Picture-in-Picture */
    .pip-window {
      position: absolute;
      bottom: 100px;
      right: 20px;
      width: 150px;
      height: 100px;
      background: #000;
      border-radius: 10px;
      z-index: 350;
      overflow: hidden;
    }
    
    /* Clipboard Manager */
    .clipboard-item {
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      padding: 10px;
      margin-bottom: 10px;
    }
    
    /* Notification badge */
    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: red;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <!-- Launch Page -->
  <div class="launch-container" id="launchPage">
    <h1>VendaOS Simulator</h1>
    <p>Experience a fully interactive mobile operating system simulation in your browser</p>
    <button class="start-btn" onclick="startSimulation()">Start Simulation</button>
    
    <div class="features">
      <div class="feature">App Store</div>
      <div class="feature">File Manager</div>
      <div class="feature">Music Player</div>
      <div class="feature">Camera App</div>
      <div class="feature">Contacts</div>
      <div class="feature">Multi-Tasking</div>
      <div class="feature">Settings</div>
      <div class="feature">Browser</div>
    </div>
  </div>

  <!-- Phone Simulation - Hidden until Start is clicked -->
  <div id="phoneSimulation">
    <div id="phone">
      <!-- Booting Screen - Always first -->
      <div id="bootingScreen">
        <div class="boot-logo">
          <div class="boot-logo-icon">V</div>
          <div>VendaOS</div>
        </div>
        <div class="boot-progress-container">
          <div class="boot-progress-bar" id="bootProgress"></div>
        </div>
        <div class="boot-status" id="bootStatus">Starting system...</div>
      </div>

      <!-- Setup Screen - Shown after boot -->
      <div id="setupScreen">
        <div class="setup-header">
          <div class="setup-title" id="setupStepTitle">Welcome</div>
          <div class="setup-subtitle" id="setupStepSubtitle">Let's set up your VendaOS</div>
        </div>
        
        <div class="setup-content">
          <!-- Step 1: Welcome -->
          <div class="setup-step active" id="setupStep1">
            <p style="text-align: center; margin-bottom: 30px;">Thank you for choosing VendaOS. We'll guide you through a few quick steps to get started.</p>
            <div style="text-align: center;">
              <img src="https://cdn-icons-png.flaticon.com/512/2965/2965300.png" width="150" style="opacity: 0.8;">
            </div>
          </div>
          
          <!-- Step 2: Language Selection -->
          <div class="setup-step" id="setupStep2">
            <div class="setup-option" onclick="selectSetupOption(this, 'lang-en')">
              <div class="setup-option-icon"><i class="fas fa-language"></i></div>
              <div class="setup-option-text">
                <div class="setup-option-title">English</div>
                <div class="setup-option-subtitle">System language</div>
              </div>
            </div>
            
            <div class="setup-option" onclick="selectSetupOption(this, 'lang-de')">
              <div class="setup-option-icon"><i class="fas fa-language"></i></div>
              <div class="setup-option-text">
                <div class="setup-option-title">Deutsch</div>
                <div class="setup-option-subtitle">Systemsprache</div>
              </div>
            </div>
            
            <div class="setup-option" onclick="selectSetupOption(this, 'lang-fr')">
              <div class="setup-option-icon"><i class="fas fa-language"></i></div>
              <div class="setup-option-text">
                <div class="setup-option-title">Français</div>
                <div class="setup-option-subtitle">Langue du système</div>
              </div>
            </div>
            
            <div class="setup-option" onclick="selectSetupOption(this, 'lang-es')">
              <div class="setup-option-icon"><i class="fas fa-language"></i></div>
              <div class="setup-option-text">
                <div class="setup-option-title">Español</div>
                <div class="setup-option-subtitle">Idioma del sistema</div>
              </div>
            </div>
          </div>
          
          <!-- Step 3: Design Selection -->
          <div class="setup-step" id="setupStep3">
            <div class="setup-option" onclick="selectSetupOption(this, 'design-light')">
              <div class="setup-option-icon"><i class="fas fa-sun"></i></div>
              <div class="setup-option-text">
                <div class="setup-option-title">Light Design</div>
                <div class="setup-option-subtitle">Clean and bright interface</div>
              </div>
            </div>
            
            <div class="setup-option" onclick="selectSetupOption(this, 'design-dark')">
              <div class="setup-option-icon"><i class="fas fa-moon"></i></div>
              <div class="setup-option-text">
                <div class="setup-option-title">Dark Design</div>
                <div class="setup-option-subtitle">Easier on the eyes</div>
              </div>
            </div>
            
            <div class="setup-option" onclick="selectSetupOption(this, 'design-auto')">
              <div class="setup-option-icon"><i class="fas fa-robot"></i></div>
              <div class="setup-option-text">
                <div class="setup-option-title">Automatic</div>
                <div class="setup-option-subtitle">Adjusts based on time</div>
              </div>
            </div>
            
            <div class="setup-option" onclick="selectSetupOption(this, 'theme-blue')">
              <div class="setup-option-icon"><i class="fas fa-palette" style="color: #007AFF;"></i></div>
              <div class="setup-option-text">
                <div class="setup-option-title">Blue Theme</div>
                <div class="setup-option-subtitle">Cool blue accent color</div>
              </div>
            </div>
            
            <div class="setup-option" onclick="selectSetupOption(this, 'theme-purple')">
              <div class="setup-option-icon"><i class="fas fa-palette" style="color: #5856D6;"></i></div>
              <div class="setup-option-text">
                <div class="setup-option-title">Purple Theme</div>
                <div class="setup-option-subtitle">Elegant purple accent</div>
              </div>
            </div>
          </div>
          
          <!-- Step 4: Network Setup -->
          <div class="setup-step" id="setupStep4">
            <div class="setup-option" onclick="selectSetupOption(this, 'wifi-home')">
              <div class="setup-option-icon"><i class="fas fa-home"></i></div>
              <div class="setup-option-text">
                <div class="setup-option-title">Home Network</div>
                <div class="setup-option-subtitle">Connect to your home Wi-Fi</div>
              </div>
            </div>
            
            <div class="setup-option" onclick="selectSetupOption(this, 'wifi-work')">
              <div class="setup-option-icon"><i class="fas fa-building"></i></div>
              <div class="setup-option-text">
                <div class="setup-option-title">Work Network</div>
                <div class="setup-option-subtitle">Connect to your work Wi-Fi</div>
              </div>
            </div>
            
            <div class="setup-option" onclick="selectSetupOption(this, 'wifi-test')">
              <div class="setup-option-icon"><i class="fas fa-wifi"></i></div>
              <div class="setup-option-text">
                <div class="setup-option-title">VendaOS-Test</div>
                <div class="setup-option-subtitle">Our test network</div>
              </div>
            </div>
            
            <div class="setup-option" onclick="selectSetupOption(this, 'wifi-later')">
              <div class="setup-option-icon"><i class="fas fa-clock"></i></div>
              <div class="setup-option-text">
                <div class="setup-option-title">Do It Later</div>
                <div class="setup-option-subtitle">Connect to Wi-Fi later</div>
              </div>
            </div>
          </div>
          
          <!-- Step 5: Privacy Settings -->
          <div class="setup-step" id="setupStep5">
            <div class="setup-option" onclick="selectSetupOption(this, 'privacy-standard')">
              <div class="setup-option-icon"><i class="fas fa-shield-alt"></i></div>
              <div class="setup-option-text">
                <div class="setup-option-title">Standard Protection</div>
                <div class="setup-option-subtitle">Balanced privacy and functionality</div>
              </div>
            </div>
            
            <div class="setup-option" onclick="selectSetupOption(this, 'privacy-enhanced')">
              <div class="setup-option-icon"><i class="fas fa-lock"></i></div>
              <div class="setup-option-text">
                <div class="setup-option-title">Enhanced Protection</div>
                <div class="setup-option-subtitle">Maximum privacy settings</div>
              </div>
            </div>
            
            <div class="setup-option" onclick="selectSetupOption(this, 'privacy-custom')">
              <div class="setup-option-icon"><i class="fas fa-cog"></i></div>
              <div class="setup-option-text">
                <div class="setup-option-title">Custom Settings</div>
                <div class="setup-option-subtitle">Configure your own preferences</div>
              </div>
            </div>
          </div>
          
          <!-- Step 6: Complete Setup -->
          <div class="setup-step" id="setupStep6">
            <div style="text-align: center;">
              <div style="font-size: 80px; margin-bottom: 20px;"><i class="fas fa-party-horn"></i></div>
              <h2 style="margin-bottom: 15px;" id="completeTitle">Setup Complete!</h2>
              <p style="margin-bottom: 30px;" id="completeSubtitle">Your VendaOS is ready to use. You can always change these settings later.</p>
              <div style="font-size: 40px; margin-bottom: 20px; animation: bounce 2s infinite;"><i class="fas fa-hand-point-down"></i></div>
            </div>
          </div>
        </div>
        
        <div class="setup-footer">
          <button class="setup-button" id="setupBackButton" onclick="setupPreviousStep()" style="visibility: hidden;">Back</button>
          <button class="setup-button primary" id="setupNextButton" onclick="setupNextStep()" disabled>Continue</button>
        </div>
      </div>

      <!-- Lock Screen -->
      <div id="lockScreen">
        <div style="text-align: center;">
          <div class="lock-time" id="lockTime">9:41</div>
          <div class="lock-date" id="lockDate">Monday, June 5</div>
        </div>
        
        <div class="lock-notifications" id="lockNotifications">
          <!-- Notifications will be added here -->
        </div>
        
        <div class="unlock-area">
          <div class="unlock-hint">Swipe up to unlock</div>
          <div class="unlock-slider" onclick="unlockPhone()">
            <i class="fas fa-chevron-up"></i>
          </div>
        </div>
      </div>

      <!-- Phone Content Container -->
      <div id="phoneContent">
        <!-- Status Bar -->
        <div id="statusBar">
          <div class="status-left">
            <div class="status-time" id="statusTime">9:41</div>
          </div>
          <div class="status-right">
            <div class="status-icon"><i class="fas fa-wifi"></i></div>
            <div class="status-icon"><i class="fas fa-battery-full"></i></div>
          </div>
        </div>
        
        <!-- Clickable areas for notification center and control center -->
        <div class="status-click-left" onclick="showNotificationCenter()"></div>
        <div class="status-click-right" onclick="showControlCenter()"></div>
        
        <!-- Touch area for swipe gestures on mobile -->
        <div class="touch-area" ontouchstart="handleTouchStart(event)" ontouchmove="handleTouchMove(event)"></div>
        
        <!-- Home Screen -->
        <div id="homeScreen">
          <!-- Weather Widget -->
          <div class="widget weather-widget" onclick="openApp('weather')">
            <div class="weather-icon"><i class="fas fa-sun"></i></div>
            <div class="weather-info">
              <div style="font-weight: bold;">Sunny</div>
              <div>72°F • San Francisco</div>
            </div>
          </div>
          
          <!-- Calendar Widget -->
          <div class="widget calendar-widget" onclick="openApp('calendar')">
            <div class="calendar-widget-title">Today's Events</div>
            <div class="calendar-widget-event">
              <span class="calendar-widget-event-time">10:00</span>
              <span>Team Meeting</span>
            </div>
            <div class="calendar-widget-event">
              <span class="calendar-widget-event-time">12:30</span>
              <span>Lunch with Sarah</span>
            </div>
          </div>
          
          <div class="app-grid">
            <div class="app-icon" onclick="openApp('messages')">
              <div class="app-icon-image"><i class="fas fa-comment-dots"></i></div>
              <div class="app-icon-name">Messages</div>
            </div>
            <div class="app-icon" onclick="openApp('phone')">
              <div class="app-icon-image"><i class="fas fa-phone"></i></div>
              <div class="app-icon-name">Phone</div>
            </div>
            <div class="app-icon" onclick="openApp('mail')">
              <div class="app-icon-image"><i class="fas fa-envelope"></i></div>
              <div class="app-icon-name">Mail</div>
            </div>
            <div class="app-folder" onclick="openFolder('Utilities')">
              <div class="folder-icon"><i class="fas fa-folder"></i></div>
              <div class="app-icon-name">Utilities</div>
              <div class="folder-contents" id="utilitiesFolder">
                <div class="folder-header">
                  <div class="folder-title">Utilities</div>
                  <div class="folder-close" onclick="event.stopPropagation(); closeFolder('utilitiesFolder')"><i class="fas fa-times"></i></div>
                </div>
                <div class="app-icon" onclick="openApp('calculator')">
                  <div class="app-icon-image"><i class="fas fa-calculator"></i></div>
                  <div class="app-icon-name">Calculator</div>
                </div>
                <div class="app-icon" onclick="openApp('notes')">
                  <div class="app-icon-image"><i class="fas fa-sticky-note"></i></div>
                  <div class="app-icon-name">Notes</div>
                </div>
                <div class="app-icon" onclick="openApp('voice-memos')">
                  <div class="app-icon-image"><i class="fas fa-microphone"></i></div>
                  <div class="app-icon-name">Voice Memos</div>
                </div>
              </div>
            </div>
            <div class="app-icon" onclick="openApp('camera')">
              <div class="app-icon-image"><i class="fas fa-camera"></i></div>
              <div class="app-icon-name">Camera</div>
            </div>
            <div class="app-icon" onclick="openApp('photos')">
              <div class="app-icon-image"><i class="fas fa-images"></i></div>
              <div class="app-icon-name">Photos</div>
            </div>
            <div class="app-icon" onclick="openApp('maps')">
              <div class="app-icon-image"><i class="fas fa-map"></i></div>
              <div class="app-icon-name">Maps</div>
            </div>
            <div class="app-icon" onclick="openApp('weather')">
              <div class="app-icon-image"><i class="fas fa-sun"></i></div>
              <div class="app-icon-name">Weather</div>
            </div>
            <div class="app-icon" onclick="openApp('music')">
              <div class="app-icon-image"><i class="fas fa-music"></i></div>
              <div class="app-icon-name">Music</div>
            </div>
            <div class="app-icon" onclick="openApp('calendar')">
              <div class="app-icon-image"><i class="fas fa-calendar"></i></div>
              <div class="app-icon-name">Calendar</div>
            </div>
            <div class="app-icon" onclick="openApp('browser')">
              <div class="app-icon-image"><i class="fas fa-globe"></i></div>
              <div class="app-icon-name">Browser</div>
            </div>
            <div class="app-icon" onclick="openApp('appstore')">
              <div class="app-icon-image"><i class="fas fa-shopping-bag"></i></div>
              <div class="app-icon-name">App Store</div>
            </div>
            <div class="app-icon" onclick="openApp('files')">
              <div class="app-icon-image"><i class="fas fa-folder"></i></div>
              <div class="app-icon-name">Files</div>
            </div>
            <div class="app-icon" onclick="openApp('contacts')">
              <div class="app-icon-image"><i class="fas fa-user"></i></div>
              <div class="app-icon-name">Contacts</div>
            </div>
            <div class="app-icon" onclick="openApp('battery')">
              <div class="app-icon-image"><i class="fas fa-battery-full"></i></div>
              <div class="app-icon-name">Battery</div>
            </div>
            <div class="app-icon" onclick="openApp('settings')">
              <div class="app-icon-image"><i class="fas fa-cog"></i></div>
              <div class="app-icon-name">Settings</div>
            </div>
          </div>
          
          <div class="dock">
            <div class="app-icon" onclick="openApp('phone')">
              <div class="app-icon-image"><i class="fas fa-phone"></i></div>
            </div>
            <div class="app-icon" onclick="openApp('messages')">
              <div class="app-icon-image"><i class="fas fa-comment-dots"></i></div>
            </div>
            <div class="app-icon" onclick="openApp('mail')">
              <div class="app-icon-image"><i class="fas fa-envelope"></i></div>
            </div>
            <div class="app-icon" onclick="openApp('music')">
              <div class="app-icon-image"><i class="fas fa-music"></i></div>
            </div>
          </div>
        </div>
        
        <!-- App Window -->
        <div id="appWindow">
          <div class="app-header">
            <div class="app-title" id="appTitle">App</div>
          </div>
          <div id="appContent"></div>
          <div class="app-close" onclick="closeApp()"></div>
        </div>
        
        <!-- Notification Center -->
        <div id="notificationCenter">
          <div class="notification-header">
            <div class="notification-title">Notifications</div>
            <div class="notification-clear" onclick="clearNotifications()">Clear All</div>
          </div>
          <div id="notificationList"></div>
        </div>
        
        <!-- Control Center -->
        <div id="controlCenter">
          <div class="control-header">
            <div class="control-title">Control Center</div>
            <div class="control-close" onclick="hideControlCenter()"><i class="fas fa-times"></i></div>
          </div>
          
          <div class="control-grid">
            <div class="control-item" onclick="toggleSetting('wifi')">
              <div class="control-item-icon"><i class="fas fa-wifi"></i></div>
              <div class="control-item-name">Wi-Fi</div>
            </div>
            <div class="control-item" onclick="toggleSetting('bluetooth')">
              <div class="control-item-icon"><i class="fas fa-bluetooth"></i></div>
              <div class="control-item-name">Bluetooth</div>
            </div>
            <div class="control-item" onclick="toggleSetting('airplane')">
              <div class="control-item-icon"><i class="fas fa-plane"></i></div>
              <div class="control-item-name">Airplane</div>
            </div>
            <div class="control-item" onclick="toggleSetting('flashlight')">
              <div class="control-item-icon"><i class="fas fa-lightbulb"></i></div>
              <div class="control-item-name">Flashlight</div>
            </div>
            <div class="control-item" onclick="toggleSetting('darkmode')">
              <div class="control-item-icon"><i class="fas fa-moon"></i></div>
              <div class="control-item-name">Dark Mode</div>
            </div>
            <div class="control-item" onclick="toggleSetting('donotdisturb')">
              <div class="control-item-icon"><i class="fas fa-bell-slash"></i></div>
              <div class="control-item-name">DND</div>
            </div>
          </div>
          
          <div class="control-slider">
            <input type="range" min="0" max="100" value="50" style="width: 100%;">
          </div>
          
          <!-- Media Controls -->
          <div class="widget" style="margin-top: 20px;">
            <div style="display: flex; align-items: center;">
              <div style="width: 40px; height: 40px; background: rgba(255,255,255,0.1); border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-right: 10px;">
                <i class="fas fa-music"></i>
              </div>
              <div style="flex: 1;">
                <div style="font-weight: bold;">Blinding Lights</div>
                <div style="font-size: 12px; color: rgba(255,255,255,0.7);">The Weeknd</div>
              </div>
            </div>
            <div style="display: flex; justify-content: space-between; margin-top: 15px;">
              <button style="background: none; border: none; color: white; font-size: 16px;" onclick="skipPrevious()"><i class="fas fa-step-backward"></i></button>
              <button style="background: none; border: none; color: white; font-size: 16px;" onclick="togglePlay()"><i class="fas fa-pause"></i></button>
              <button style="background: none; border: none; color: white; font-size: 16px;" onclick="skipNext()"><i class="fas fa-step-forward"></i></button>
            </div>
          </div>
        </div>
        
        <!-- App Switcher -->
        <div id="appSwitcher"></div>
        
        <!-- Background Options Modal -->
        <div id="backgroundOptions">
          <div class="background-container">
            <div class="background-title">Choose Background</div>
            <div class="background-grid">
              <div class="background-option" style="background-image: url('https://images.unsplash.com/photo-1506318137071-a8e063b4bec0?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');" onclick="changeBackground(this)"></div>
              <div class="background-option" style="background-image: url('https://images.unsplash.com/photo-1462331940025-496dfbfc7564?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');" onclick="changeBackground(this)"></div>
              <div class="background-option" style="background-image: url('https://images.unsplash.com/photo-1519125323398-675f0ddb6308?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');" onclick="changeBackground(this)"></div>
              <div class="background-option" style="background-image: url('https://images.unsplash.com/photo-1429087969512-1e85aab2683d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');" onclick="changeBackground(this)"></div>
              <div class="background-option" style="background-image: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');" onclick="changeBackground(this)"></div>
              <div class="background-option" style="background-image: url('https://images.unsplash.com/photo-1511497584788-876760111969?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');" onclick="changeBackground(this)"></div>
            </div>
            <button class="setup-button" style="margin-top: 20px; width: 100%;" onclick="hideBackgroundOptions()">Cancel</button>
          </div>
        </div>
        
        <!-- Login Modal -->
        <div id="loginModal">
          <div class="login-container">
            <div class="login-title">Sign in to VendaOS</div>
            <input type="text" class="login-input" placeholder="Email or username" id="loginEmail">
            <input type="password" class="login-input" placeholder="Password" id="loginPassword">
            <button class="login-button" onclick="login()">Sign In</button>
            <div class="login-divider">or</div>
            <button class="google-login" onclick="googleLogin()">
              <span class="google-icon"><i class="fab fa-google"></i></span>
              Sign in with Google
            </button>
          </div>
        </div>
        
        <!-- Photo Viewer -->
        <div class="photo-viewer" id="photoViewer">
          <div class="photo-viewer-header">
            <button style="background: none; border: none; color: white; font-size: 20px;" onclick="closePhotoViewer()"><i class="fas fa-times"></i></button>
          </div>
          <div class="photo-viewer-image">
            <img id="viewedPhoto" src="">
          </div>
          <div class="photo-viewer-footer">
            <button style="background: none; border: none; color: white; font-size: 20px; margin: 0 15px;"><i class="fas fa-trash"></i></button>
            <button style="background: none; border: none; color: white; font-size: 20px; margin: 0 15px;"><i class="fas fa-share"></i></button>
            <button style="background: none; border: none; color: white; font-size: 20px; margin: 0 15px;"><i class="fas fa-heart"></i></button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // System state
    let currentApp = null;
    let isLoggedIn = false;
    let currentUser = null;
    let setupStep = 1;
    let setupData = {
      language: null,
      design: null,
      wifi: null,
      privacy: null,
      theme: null
    };
    let notifications = [];
    let installedApps = [];
    let openApps = [];
    let isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    let touchStartX = 0;
    let touchStartY = 0;
    let isLocked = true;
    let photos = [
      'https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
      'https://images.unsplash.com/photo-1511497584788-876760111969?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
      'https://images.unsplash.com/photo-1429087969512-1e85aab2683d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
      'https://images.unsplash.com/photo-1519125323398-675f0ddb6308?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
      'https://images.unsplash.com/photo-1462331940025-496dfbfc7564?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
      'https://images.unsplash.com/photo-1506318137071-a8e063b4bec0?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80'
    ];
    let calendarEvents = [
      { id: 1, title: 'Team Meeting', date: new Date(), time: '10:00', location: 'Office' },
      { id: 2, title: 'Lunch with Sarah', date: new Date(), time: '12:30', location: 'Downtown Cafe' },
      { id: 3, title: 'Project Deadline', date: new Date(new Date().setDate(new Date().getDate() + 2)), time: '18:00', location: '' }
    ];
    
    // Language translations
    const translations = {
      'en': {
        'welcome': 'Welcome',
        'setup_subtitle': "Let's set up your VendaOS",
        'continue': 'Continue',
        'back': 'Back',
        'complete_title': 'Setup Complete!',
        'complete_subtitle': 'Your VendaOS is ready to use. You can always change these settings later.',
        'choose_language': 'Choose Language',
        'choose_design': 'Choose Design',
        'connect_wifi': 'Connect to Wi-Fi',
        'privacy_settings': 'Privacy Settings',
        'get_started': 'Get Started'
      },
      'de': {
        'welcome': 'Willkommen',
        'setup_subtitle': 'Lassen Sie uns Ihr VendaOS einrichten',
        'continue': 'Weiter',
        'back': 'Zurück',
        'complete_title': 'Einrichtung abgeschlossen!',
        'complete_subtitle': 'Ihr VendaOS ist einsatzbereit. Sie können diese Einstellungen jederzeit ändern.',
        'choose_language': 'Sprache wählen',
        'choose_design': 'Design wählen',
        'connect_wifi': 'Mit Wi-Fi verbinden',
        'privacy_settings': 'Datenschutzeinstellungen',
        'get_started': 'Loslegen'
      },
      'fr': {
        'welcome': 'Bienvenue',
        'setup_subtitle': 'Configurons votre VendaOS',
        'continue': 'Continuer',
        'back': 'Retour',
        'complete_title': 'Configuration terminée!',
        'complete_subtitle': 'Votre VendaOS est prêt à l\'emploi. Vous pouvez toujours modifier ces paramètres plus tard.',
        'choose_language': 'Choisir la langue',
        'choose_design': 'Choisir le design',
        'connect_wifi': 'Se connecter au Wi-Fi',
        'privacy_settings': 'Paramètres de confidentialité',
        'get_started': 'Commencer'
      },
      'es': {
        'welcome': 'Bienvenido',
        'setup_subtitle': 'Configuremos tu VendaOS',
        'continue': 'Continuar',
        'back': 'Atrás',
        'complete_title': '¡Configuración completada!',
        'complete_subtitle': 'Tu VendaOS está listo para usar. Siempre puedes cambiar estos ajustes más tarde.',
        'choose_language': 'Elegir idioma',
        'choose_design': 'Elegir diseño',
        'connect_wifi': 'Conectar a Wi-Fi',
        'privacy_settings': 'Configuración de privacidad',
        'get_started': 'Empezar'
      }
    };
    
    // Current language
    let currentLanguage = 'en';
    
    // Available apps in App Store
    const appStoreApps = [
      { id: 'twitter', name: 'Twitter', icon: '<i class="fab fa-twitter"></i>', developer: 'Twitter Inc.', price: 'FREE' },
      { id: 'instagram', name: 'Instagram', icon: '<i class="fab fa-instagram"></i>', developer: 'Meta', price: 'FREE' },
      { id: 'spotify', name: 'Spotify', icon: '<i class="fab fa-spotify"></i>', developer: 'Spotify AB', price: 'FREE' },
      { id: 'netflix', name: 'Netflix', icon: '<i class="fas fa-film"></i>', developer: 'Netflix Inc.', price: 'FREE' },
      { id: 'whatsapp', name: 'WhatsApp', icon: '<i class="fab fa-whatsapp"></i>', developer: 'Meta', price: 'FREE' },
      { id: 'youtube', name: 'YouTube', icon: '<i class="fab fa-youtube"></i>', developer: 'Google LLC', price: 'FREE' }
    ];
    
    // Contacts data
    const contactsData = [
      { name: 'John Doe', phone: '(555) 123-4567', email: 'john@example.com', avatar: '<i class="fas fa-user"></i>' },
      { name: 'Jane Smith', phone: '(555) 234-5678', email: 'jane@example.com', avatar: '<i class="fas fa-user"></i>' },
      { name: 'Mike Johnson', phone: '(555) 345-6789', email: 'mike@example.com', avatar: '<i class="fas fa-user-tie"></i>' },
      { name: 'Sarah Williams', phone: '(555) 456-7890', email: 'sarah@example.com', avatar: '<i class="fas fa-user-tie"></i>' },
      { name: 'David Brown', phone: '(555) 567-8901', email: 'david@example.com', avatar: '<i class="fas fa-user"></i>' }
    ];
    
    // Music library
    const musicLibrary = [
      { title: 'Blinding Lights', artist: 'The Weeknd', album: 'After Hours' },
      { title: 'Save Your Tears', artist: 'The Weeknd', album: 'After Hours' },
      { title: 'Stay', artist: 'The Kid LAROI, Justin Bieber', album: 'F*CK LOVE 3+' },
      { title: 'good 4 u', artist: 'Olivia Rodrigo', album: 'SOUR' },
      { title: 'Levitating', artist: 'Dua Lipa', album: 'Future Nostalgia' }
    ];
    
    // Start the simulation
    function startSimulation() {
      document.getElementById('launchPage').style.display = 'none';
      document.getElementById('phoneSimulation').style.display = 'block';
      bootSystem();
    }
    
    // Update time
    function updateTime() {
      const now = new Date();
      let hours = now.getHours();
      let minutes = now.getMinutes();
      minutes = minutes < 10 ? '0' + minutes : minutes;
      document.getElementById('statusTime').textContent = `${hours}:${minutes}`;
      document.getElementById('lockTime').textContent = `${hours}:${minutes}`;
      
      // Update lock screen date
      const options = { weekday: 'long', month: 'long', day: 'numeric' };
      document.getElementById('lockDate').textContent = now.toLocaleDateString(currentLanguage, options);
    }
    
    setInterval(updateTime, 1000);
    updateTime();
    
    // Apply translations
    function applyTranslations(lang) {
      currentLanguage = lang;
      const t = translations[lang];
      
      document.getElementById('setupStepTitle').textContent = t.welcome;
      document.getElementById('setupStepSubtitle').textContent = t.setup_subtitle;
      document.getElementById('setupNextButton').textContent = t.continue;
      document.getElementById('setupBackButton').textContent = t.back;
      document.getElementById('completeTitle').textContent = t.complete_title;
      document.getElementById('completeSubtitle').textContent = t.complete_subtitle;
      
      // Update step titles
      if (setupStep === 2) {
        document.getElementById('setupStepTitle').textContent = t.choose_language;
      } else if (setupStep === 3) {
        document.getElementById('setupStepTitle').textContent = t.choose_design;
      } else if (setupStep === 4) {
        document.getElementById('setupStepTitle').textContent = t.connect_wifi;
      } else if (setupStep === 5) {
        document.getElementById('setupStepTitle').textContent = t.privacy_settings;
      } else if (setupStep === 6) {
        document.getElementById('setupStepTitle').textContent = t.complete_title;
        document.getElementById('setupNextButton').textContent = t.get_started;
      }
    }
    
    // Lock/unlock phone
    function lockPhone() {
      isLocked = true;
      document.getElementById('lockScreen').style.display = 'flex';
      updateLockScreenNotifications();
    }
    
    function unlockPhone() {
      isLocked = false;
      document.getElementById('lockScreen').style.display = 'none';
    }
    
    function updateLockScreenNotifications() {
      const lockNotifications = document.getElementById('lockNotifications');
      lockNotifications.innerHTML = '';
      
      if (notifications.length === 0) {
        return;
      }
      
      // Show only the latest 3 notifications on lock screen
      const recentNotifications = notifications.slice(0, 3);
      
      recentNotifications.forEach(notif => {
        const notifElement = document.createElement('div');
        notifElement.className = 'lock-notification';
        notifElement.innerHTML = `
          <div class="lock-notification-app">${notif.title}</div>
          <div>${notif.message}</div>
        `;
        lockNotifications.appendChild(notifElement);
      });
    }
    
    // Boot sequence
    function bootSystem() {
      let progress = 0;
      const statusMessages = [
        "Starting system...",
        "Loading core services...",
        "Initializing UI...",
        "Preparing apps...",
        "Ready!"
      ];
      
      const bootInterval = setInterval(() => {
        progress += 5;
        document.getElementById('bootProgress').style.width = `${progress}%`;
        
        // Update status message at certain intervals
        if (progress % 25 === 0) {
          const statusIndex = Math.min(Math.floor(progress / 25), statusMessages.length - 1);
          document.getElementById('bootStatus').textContent = statusMessages[statusIndex];
        }
        
        if (progress >= 100) {
          clearInterval(bootInterval);
          setTimeout(() => {
            document.getElementById('bootingScreen').style.display = 'none';
            showSetupScreen();
          }, 500);
        }
      }, 200);
    }
    
    // Setup screen functions
    function showSetupScreen() {
      document.getElementById('setupScreen').style.display = 'flex';
      updateSetupStep();
    }
    
    function updateSetupStep() {
      // Hide all steps
      document.querySelectorAll('.setup-step').forEach(step => {
        step.classList.remove('active');
      });
      
      // Show current step
      document.getElementById(`setupStep${setupStep}`).classList.add('active');
      
      // Update titles based on step
      let title = translations[currentLanguage].welcome;
      let subtitle = translations[currentLanguage].setup_subtitle;
      
      switch(setupStep) {
        case 2:
          title = translations[currentLanguage].choose_language;
          break;
        case 3:
          title = translations[currentLanguage].choose_design;
          break;
        case 4:
          title = translations[currentLanguage].connect_wifi;
          break;
        case 5:
          title = translations[currentLanguage].privacy_settings;
          break;
        case 6:
          title = translations[currentLanguage].complete_title;
          subtitle = translations[currentLanguage].complete_subtitle;
          break;
      }
      
      document.getElementById('setupStepTitle').textContent = title;
      document.getElementById('setupStepSubtitle').textContent = subtitle;
      
      // Update button visibility and text
      document.getElementById('setupBackButton').style.visibility = setupStep > 1 ? 'visible' : 'hidden';
      
      if (setupStep === 6) {
        document.getElementById('setupNextButton').textContent = translations[currentLanguage].get_started;
      } else {
        document.getElementById('setupNextButton').textContent = translations[currentLanguage].continue;
      }
      
      // Enable/disable next button based on selection
      const hasSelection = checkStepSelection();
      document.getElementById('setupNextButton').disabled = !hasSelection;
    }
    
    function checkStepSelection() {
      // For welcome screen (step 1), always allow continue
      if (setupStep === 1) return true;
      
      // Check if current step has a selection
      switch(setupStep) {
        case 2: return setupData.language !== null;
        case 3: return setupData.design !== null || setupData.theme !== null;
        case 4: return setupData.wifi !== null;
        case 5: return setupData.privacy !== null;
        case 6: return true; // Complete screen always allows continue
      }
      
      return false;
    }
    
    function setupNextStep() {
      if (setupStep === 6) {
        // Finish setup
        document.getElementById('setupScreen').style.display = 'none';
        lockPhone(); // Show lock screen after setup
        return;
      }
      
      setupStep++;
      updateSetupStep();
    }
    
    function setupPreviousStep() {
      if (setupStep > 1) {
        setupStep--;
        updateSetupStep();
      }
    }
    
    function selectSetupOption(element, value) {
      // Remove selected class from all options in this step
      element.parentElement.querySelectorAll('.setup-option').forEach(opt => {
        opt.classList.remove('selected');
      });
      
      // Add selected class to clicked option
      element.classList.add('selected');
      
      // Store the selection
      if (setupStep === 2) {
        setupData.language = value.replace('lang-', '');
        applyTranslations(setupData.language);
      } else if (setupStep === 3) {
        if (value.startsWith('design-')) {
          setupData.design = value;
          setupData.theme = null;
        } else if (value.startsWith('theme-')) {
          setupData.theme = value;
          setupData.design = null;
        }
      } else if (setupStep === 4) {
        setupData.wifi = value;
      } else if (setupStep === 5) {
        setupData.privacy = value;
      }
      
      // Enable next button if a selection was made
      document.getElementById('setupNextButton').disabled = false;
    }
    
    // Background functions
    function showBackgroundOptions() {
      document.getElementById('backgroundOptions').style.display = 'flex';
    }
    
    function hideBackgroundOptions() {
      document.getElementById('backgroundOptions').style.display = 'none';
    }
    
    function changeBackground(element) {
      // Remove selected class from all options
      document.querySelectorAll('.background-option').forEach(opt => {
        opt.classList.remove('selected');
      });
      
      // Add selected class to clicked option
      element.classList.add('selected');
      
      // Get the background image URL
      const bgImage = element.style.backgroundImage;
      document.getElementById('homeScreen').style.backgroundImage = bgImage;
      
      // Hide the options after selection
      setTimeout(hideBackgroundOptions, 500);
    }
    
    // Login functions - Only accessible through Settings
    function showLogin() {
      document.getElementById('loginModal').style.display = 'flex';
    }
    
    function hideLogin() {
      document.getElementById('loginModal').style.display = 'none';
    }
    
    function login() {
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      
      if (email && password) {
        // Simple validation
        if (password.length < 6) {
          alert('Password must be at least 6 characters');
          return;
        }
        
        isLoggedIn = true;
        currentUser = email.split('@')[0];
        hideLogin();
        addNotification('Welcome back', `Hello ${currentUser}`, 'system');
        // Update settings UI to show logged in state
        openApp('settings');
      } else {
        alert('Please enter both email and password');
      }
    }
    
    function googleLogin() {
      // In a real implementation, this would open Google OAuth
      alert('Redirecting to Google login...');
      isLoggedIn = true;
      currentUser = 'Google User';
      hideLogin();
      addNotification('Welcome', 'You are now signed in with Google', 'system');
      // Update settings UI to show logged in state
      openApp('settings');
    }
    
    function logout() {
      isLoggedIn = false;
      currentUser = null;
      addNotification('Logged out', 'You have been signed out', 'system');
      // Update settings UI to show logged out state
      openApp('settings');
    }
    
    // App functions
    function openApp(appName) {
      if (isLocked) return;
      
      currentApp = appName;
      document.getElementById('appTitle').textContent = appName;
      document.getElementById('homeScreen').style.display = 'none';
      document.getElementById('appWindow').style.display = 'flex';
      
      // Add to open apps if not already there
      if (!openApps.includes(appName)) {
        openApps.push(appName);
      }
      
      setTimeout(() => {
        document.getElementById('appWindow').classList.add('active');
      }, 10);
      
      hideNotificationCenter();
      hideControlCenter();
      
      // Clear any notification badges for this app
      const appIcon = document.querySelector(`.app-icon[onclick="openApp('${appName}')"]`);
      if (appIcon) {
        const badge = appIcon.querySelector('.notification-badge');
        if (badge) {
          badge.remove();
        }
      }
      
      // Load appropriate app content
      if (appName === 'settings') {
        document.getElementById('appContent').innerHTML = `
          <div class="settings-section">
            <div class="settings-section-title">Account</div>
            <div class="settings-item" onclick="showLogin()">
              <div class="settings-item-content">
                <div class="settings-item-icon"><i class="fas fa-user"></i></div>
                <div class="settings-item-text">
                  <div class="settings-item-title">${currentUser || 'Sign In'}</div>
                  <div class="settings-item-subtitle">${isLoggedIn ? 'Manage your account' : 'Optional sign in for more features'}</div>
                </div>
              </div>
              <div>›</div>
            </div>
            ${isLoggedIn ? `
            <div class="settings-item" onclick="logout()">
              <div class="settings-item-content">
                <div class="settings-item-icon"><i class="fas fa-sign-out-alt"></i></div>
                <div class="settings-item-text">
                  <div class="settings-item-title">Sign Out</div>
                  <div class="settings-item-subtitle">Log out of your account</div>
                </div>
              </div>
              <div>›</div>
            </div>
            ` : ''}
          </div>

          <div class="settings-section">
            <div class="settings-section-title">Appearance</div>
            <div class="settings-item" onclick="showBackgroundOptions()">
              <div class="settings-item-content">
                <div class="settings-item-icon"><i class="fas fa-palette"></i></div>
                <div class="settings-item-text">
                  <div class="settings-item-title">Background</div>
                  <div class="settings-item-subtitle">Change home screen background</div>
                </div>
              </div>
              <div>›</div>
            </div>
            <div class="settings-item" onclick="toggleSetting('darkmode')">
              <div class="settings-item-content">
                <div class="settings-item-icon"><i class="fas fa-moon"></i></div>
                <div class="settings-item-text">
                  <div class="settings-item-title">Dark Mode</div>
                  <div class="settings-item-subtitle">Enabled</div>
                </div>
              </div>
              <div class="toggle-switch on" id="darkModeToggle"></div>
            </div>
          </div>

          <div class="settings-section">
            <div class="settings-section-title">Connections</div>
            <div class="settings-item" onclick="toggleSetting('wifi')">
              <div class="settings-item-content">
                <div class="settings-item-icon"><i class="fas fa-wifi"></i></div>
                <div class="settings-item-text">
                  <div class="settings-item-title">Wi-Fi</div>
                  <div class="settings-item-subtitle">Not connected</div>
                </div>
              </div>
              <div class="toggle-switch" id="wifiToggle"></div>
            </div>
            <div class="settings-item" onclick="toggleSetting('bluetooth')">
              <div class="settings-item-content">
                <div class="settings-item-icon"><i class="fas fa-bluetooth"></i></div>
                <div class="settings-item-text">
                  <div class="settings-item-title">Bluetooth</div>
                  <div class="settings-item-subtitle">Off</div>
                </div>
              </div>
              <div class="toggle-switch" id="bluetoothToggle"></div>
            </div>
          </div>

          <div class="settings-section">
            <div class="settings-section-title">Sounds & Haptics</div>
            <div class="settings-item" onclick="changeRingtone()">
              <div class="settings-item-content">
                <div class="settings-item-icon"><i class="fas fa-bell"></i></div>
                <div class="settings-item-text">
                  <div class="settings-item-title">Ringtone</div>
                  <div class="settings-item-subtitle">Default</div>
                </div>
              </div>
              <div>›</div>
            </div>
            <div class="settings-item" onclick="toggleSetting('haptics')">
              <div class="settings-item-content">
                <div class="settings-item-icon"><i class="fas fa-vibrate"></i></div>
                <div class="settings-item-text">
                  <div class="settings-item-title">Haptic Feedback</div>
                  <div class="settings-item-subtitle">Enabled</div>
                </div>
              </div>
              <div class="toggle-switch on" id="hapticsToggle"></div>
            </div>
          </div>
          
          <!-- Privacy Dashboard -->
          <div class="settings-section">
            <div class="settings-section-title">Privacy</div>
            <div class="settings-item" onclick="showPrivacyDashboard()">
              <div class="settings-item-content">
                <div class="settings-item-icon"><i class="fas fa-shield-alt"></i></div>
                <div class="settings-item-text">
                  <div class="settings-item-title">Privacy Dashboard</div>
                  <div class="settings-item-subtitle">View app permissions and activity</div>
                </div>
              </div>
              <div>›</div>
            </div>
          </div>
        `;
      } else if (appName === 'messages') {
        document.getElementById('appContent').innerHTML = `
          <div class="messages-list">
            <div class="message">Hey there! How are you?</div>
            <div class="message me">I'm good, thanks! How about you?</div>
            <div class="message">Just wanted to let you know about the meeting tomorrow</div>
            <div class="message me">What time is it again?</div>
            <div class="message">10 AM in the conference room</div>
          </div>
          <div class="message-input">
            <input type="text" placeholder="iMessage">
            <button onclick="sendMessage()"><i class="fas fa-arrow-up"></i></button>
          </div>
        `;
      } else if (appName === 'phone') {
        document.getElementById('appContent').innerHTML = `
          <div style="text-align: center; padding-top: 20px;">
            <div style="font-size: 24px; margin-bottom: 30px;">+1 (555) 123-4567</div>
            <div class="phone-keypad">
              <div class="phone-key" onclick="dialNumber('1')">
                <div class="phone-key-number">1</div>
                <div class="phone-key-letters"></div>
              </div>
              <div class="phone-key" onclick="dialNumber('2')">
                <div class="phone-key-number">2</div>
                <div class="phone-key-letters">ABC</div>
              </div>
              <div class="phone-key" onclick="dialNumber('3')">
                <div class="phone-key-number">3</div>
                <div class="phone-key-letters">DEF</div>
              </div>
              <div class="phone-key" onclick="dialNumber('4')">
                <div class="phone-key-number">4</div>
                <div class="phone-key-letters">GHI</div>
              </div>
              <div class="phone-key" onclick="dialNumber('5')">
                <div class="phone-key-number">5</div>
                <div class="phone-key-letters">JKL</div>
              </div>
              <div class="phone-key" onclick="dialNumber('6')">
                <div class="phone-key-number">6</div>
                <div class="phone-key-letters">MNO</div>
              </div>
              <div class="phone-key" onclick="dialNumber('7')">
                <div class="phone-key-number">7</div>
                <div class="phone-key-letters">PQRS</div>
              </div>
              <div class="phone-key" onclick="dialNumber('8')">
                <div class="phone-key-number">8</div>
                <div class="phone-key-letters">TUV</div>
              </div>
              <div class="phone-key" onclick="dialNumber('9')">
                <div class="phone-key-number">9</div>
                <div class="phone-key-letters">WXYZ</div>
              </div>
              <div class="phone-key" onclick="dialNumber('*')">
                <div class="phone-key-number">*</div>
              </div>
              <div class="phone-key" onclick="dialNumber('0')">
                <div class="phone-key-number">0</div>
                <div class="phone-key-letters">+</div>
              </div>
              <div class="phone-key" onclick="dialNumber('#')">
                <div class="phone-key-number">#</div>
              </div>
            </div>
            <div style="margin-top: 30px; display: flex; justify-content: center;">
              <div style="width: 60px; height: 60px; border-radius: 50%; background: #4CD964; display: flex; align-items: center; justify-content: center; font-size: 24px; cursor: pointer;" onclick="callNumber()">
                <i class="fas fa-phone"></i>
              </div>
            </div>
          </div>
        `;
      } else if (appName === 'browser') {
        document.getElementById('appContent').innerHTML = `
          <div class="browser-header">
            <input type="text" class="browser-url" placeholder="Search or enter website name" value="https://www.google.com">
            <button class="browser-go" onclick="loadBrowserUrl()">Go</button>
          </div>
          <div class="browser-content">
            <iframe class="browser-iframe" src="https://www.google.com" frameborder="0"></iframe>
          </div>
        `;
      } else if (appName === 'appstore') {
        document.getElementById('appContent').innerHTML = `
          <div class="app-store">
            <input type="text" class="app-store-search" placeholder="Search Apps">
            <div class="app-store-grid">
              ${generateAppStoreItems()}
            </div>
          </div>
        `;
      } else if (appName === 'files') {
        document.getElementById('appContent').innerHTML = `
          <div class="files-container">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
              <h2>Files</h2>
              <button style="background: none; border: none; color: white; font-size: 20px;" onclick="createNewFolder()"><i class="fas fa-plus"></i></button>
            </div>
            <div class="files-storage">
              <div class="files-storage-bar">
                <div class="files-storage-used"></div>
              </div>
              <div class="files-storage-text">15.2 GB of 64 GB Used</div>
            </div>
            <div class="files-folders">
              <div class="files-folder" onclick="openFolder('Downloads')">
                <div class="files-folder-icon"><i class="fas fa-download"></i></div>
                <div>Downloads</div>
              </div>
              <div class="files-folder" onclick="openFolder('Documents')">
                <div class="files-folder-icon"><i class="fas fa-file-alt"></i></div>
                <div>Documents</div>
              </div>
              <div class="files-folder" onclick="openFolder('Pictures')">
                <div class="files-folder-icon"><i class="fas fa-image"></i></div>
                <div>Pictures</div>
              </div>
              <div class="files-folder" onclick="openFolder('Music')">
                <div class="files-folder-icon"><i class="fas fa-music"></i></div>
                <div>Music</div>
              </div>
            </div>
          </div>
        `;
      } else if (appName === 'music') {
        const currentSong = musicLibrary[0];
        document.getElementById('appContent').innerHTML = `
          <div class="music-player">
            <div class="music-cover">${currentSong.album.charAt(0)}</div>
            <div class="music-info">
              <div class="music-title">${currentSong.title}</div>
              <div class="music-artist">${currentSong.artist}</div>
            </div>
            <div class="music-progress">
              <div class="music-progress-bar"></div>
            </div>
            <div class="music-time">
              <span>1:23</span>
              <span>3:45</span>
            </div>
            <div class="music-controls">
              <button class="music-control" onclick="skipPrevious()"><i class="fas fa-step-backward"></i></button>
              <button class="music-control" onclick="togglePlay()"><i class="fas fa-play"></i></button>
              <button class="music-control" onclick="skipNext()"><i class="fas fa-step-forward"></i></button>
            </div>
          </div>
        `;
      } else if (appName === 'camera') {
        document.getElementById('appContent').innerHTML = `
          <div class="camera-container">
            <div class="camera-viewfinder">
              <div class="camera-modes">
                <button class="camera-mode active">Photo</button>
                <button class="camera-mode">Video</button>
                <button class="camera-mode">Portrait</button>
              </div>
            </div>
            <div class="camera-controls">
              <button class="camera-switch" onclick="switchCamera()"><i class="fas fa-sync-alt"></i></button>
              <button class="camera-shutter" onclick="takePhoto()"></button>
              <button class="camera-switch" onclick="showFilters()"><i class="fas fa-paint-brush"></i></button>
            </div>
          </div>
        `;
      } else if (appName === 'photos') {
        document.getElementById('appContent').innerHTML = `
          <div class="photos-container">
            ${photos.map((photo, index) => `
              <div class="photo-item" style="background-image: url('${photo}')" onclick="viewPhoto(${index})"></div>
            `).join('')}
          </div>
        `;
      } else if (appName === 'calendar') {
        const now = new Date();
        const monthNames = ["January", "February", "March", "April", "May", "June",
          "July", "August", "September", "October", "November", "December"
        ];
        const currentMonth = monthNames[now.getMonth()];
        const currentYear = now.getFullYear();
        
        // Generate calendar days
        const firstDay = new Date(now.getFullYear(), now.getMonth(), 1);
        const lastDay = new Date(now.getFullYear(), now.getMonth() + 1, 0);
        const daysInMonth = lastDay.getDate();
        const startingDay = firstDay.getDay();
        
        let calendarDays = '';
        let dayCounter = 1;
        
        // Add empty cells for days before the first of the month
        for (let i = 0; i < startingDay; i++) {
          calendarDays += '<div class="calendar-day empty"></div>';
        }
        
        // Add days of the month
        for (let i = 1; i <= daysInMonth; i++) {
          const dayDate = new Date(now.getFullYear(), now.getMonth(), i);
          const hasEvent = calendarEvents.some(event => 
            event.date.getDate() === dayDate.getDate() && 
            event.date.getMonth() === dayDate.getMonth() && 
            event.date.getFullYear() === dayDate.getFullYear()
          );
          
          const isToday = dayDate.getDate() === now.getDate() && 
                         dayDate.getMonth() === now.getMonth() && 
                         dayDate.getFullYear() === now.getFullYear();
          
          calendarDays += `
            <div class="calendar-day ${isToday ? 'today' : ''} ${hasEvent ? 'event' : ''}" onclick="showDayEvents(${i})">
              ${i}
            </div>
          `;
        }
        
        // Get today's events
        const todaysEvents = calendarEvents.filter(event => 
          event.date.getDate() === now.getDate() && 
          event.date.getMonth() === now.getMonth() && 
          event.date.getFullYear() === now.getFullYear()
        );
        
        document.getElementById('appContent').innerHTML = `
          <div class="calendar-container">
            <div class="calendar-header">
              <div class="calendar-month">${currentMonth} ${currentYear}</div>
            </div>
            
            <div class="calendar-grid">
              <div class="calendar-day-header">Sun</div>
              <div class="calendar-day-header">Mon</div>
              <div class="calendar-day-header">Tue</div>
              <div class="calendar-day-header">Wed</div>
              <div class="calendar-day-header">Thu</div>
              <div class="calendar-day-header">Fri</div>
              <div class="calendar-day-header">Sat</div>
              
              ${calendarDays}
            </div>
            
            ${todaysEvents.length > 0 ? `
              <div class="calendar-events">
                <h3 style="margin: 20px 0 10px;">Today's Events</h3>
                ${todaysEvents.map(event => `
                  <div class="calendar-event">
                    <div class="calendar-event-time">${event.time} ${event.location ? '• ' + event.location : ''}</div>
                    <div class="calendar-event-title">${event.title}</div>
                  </div>
                `).join('')}
              </div>
            ` : ''}
          </div>
        `;
      } else if (appName === 'contacts') {
        document.getElementById('appContent').innerHTML = `
          <div class="contacts-container">
            <input type="text" class="contacts-search" placeholder="Search contacts">
            <div class="contacts-list">
              ${generateContactsList()}
            </div>
          </div>
        `;
      } else if (appName === 'battery') {
        document.getElementById('appContent').innerHTML = `
          <div class="battery-container">
            <div class="battery-icon"><i class="fas fa-battery-full"></i></div>
            <div class="battery-level">78%</div>
            <div class="battery-status">Battery Health: Good</div>
            <div class="battery-modes">
              <button class="battery-mode" onclick="setPowerMode('low')">Low Power</button>
              <button class="battery-mode active" onclick="setPowerMode('normal')">Normal</button>
              <button class="battery-mode" onclick="setPowerMode('high')">High Performance</button>
            </div>
            <div class="battery-stats">
              <div class="battery-stat">
                <span>Last Charged:</span>
                <span>2 hours ago</span>
              </div>
              <div class="battery-stat">
                <span>Screen On:</span>
                <span>3h 45m</span>
              </div>
              <div class="battery-stat">
                <span>Estimated Remaining:</span>
                <span>6h 12m</span>
              </div>
            </div>
          </div>
        `;
      } else if (appName === 'weather') {
        document.getElementById('appContent').innerHTML = `
          <div style="padding: 20px; text-align: center;">
            <div style="font-size: 60px; margin-bottom: 10px;"><i class="fas fa-sun" style="color: #FFD700;"></i></div>
            <div style="font-size: 36px; font-weight: bold;">72°F</div>
            <div style="font-size: 18px; margin-bottom: 30px;">Sunny</div>
            
            <div style="background: rgba(255,255,255,0.1); border-radius: 10px; padding: 15px; text-align: left; margin-bottom: 15px;">
              <div style="color: rgba(255,255,255,0.7); font-size: 14px; margin-bottom: 5px;">San Francisco, CA</div>
              <div style="display: flex; justify-content: space-between;">
                <div>H: 75°</div>
                <div>L: 62°</div>
              </div>
            </div>
            
            <div style="display: flex; overflow-x: auto; gap: 15px; padding: 10px 0;">
              <div style="min-width: 60px; text-align: center;">
                <div>Now</div>
                <div style="font-size: 24px; margin: 5px 0;"><i class="fas fa-sun"></i></div>
                <div>72°</div>
              </div>
              <div style="min-width: 60px; text-align: center;">
                <div>1 PM</div>
                <div style="font-size: 24px; margin: 5px 0;"><i class="fas fa-sun"></i></div>
                <div>74°</div>
              </div>
              <div style="min-width: 60px; text-align: center;">
                <div>2 PM</div>
                <div style="font-size: 24px; margin: 5px 0;"><i class="fas fa-sun"></i></div>
                <div>75°</div>
              </div>
              <div style="min-width: 60px; text-align: center;">
                <div>3 PM</div>
                <div style="font-size: 24px; margin: 5px 0;"><i class="fas fa-cloud-sun"></i></div>
                <div>74°</div>
              </div>
              <div style="min-width: 60px; text-align: center;">
                <div>4 PM</div>
                <div style="font-size: 24px; margin: 5px 0;"><i class="fas fa-cloud-sun"></i></div>
                <div>72°</div>
              </div>
            </div>
            
            <div style="margin-top: 30px;">
              <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                <div>Tomorrow</div>
                <div><i class="fas fa-cloud-sun"></i> 68°</div>
              </div>
              <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                <div>Wed</div>
                <div><i class="fas fa-cloud"></i> 65°</div>
              </div>
              <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                <div>Thu</div>
                <div><i class="fas fa-cloud-rain"></i> 62°</div>
              </div>
              <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                <div>Fri</div>
                <div><i class="fas fa-sun"></i> 70°</div>
              </div>
            </div>
          </div>
        `;
      } else {
        // Default app content for other apps
        document.getElementById('appContent').innerHTML = `
          <div style="text-align: center; padding-top: 50px;">
            <div style="font-size: 50px; margin-bottom: 20px;">${getAppIcon(appName)}</div>
            <h2>${appName}</h2>
            <p style="margin-top: 20px; color: rgba(255,255,255,0.7);">This is the ${appName} app</p>
          </div>
        `;
      }
    }
    
    function generateAppStoreItems() {
      return appStoreApps.map(app => `
        <div class="app-store-item" onclick="installApp('${app.id}')">
          <div class="app-store-icon">${app.icon}</div>
          <div class="app-store-name">${app.name}</div>
          <div class="app-store-developer">${app.developer}</div>
          <button class="app-store-get">${app.price}</button>
        </div>
      `).join('');
    }
    
    function generateContactsList() {
      return contactsData.map(contact => `
        <div class="contact-item" onclick="viewContact('${contact.name}')">
          <div class="contact-avatar">${contact.avatar}</div>
          <div>
            <div class="contact-name">${contact.name}</div>
            <div style="font-size: 12px; color: rgba(255,255,255,0.7);">${contact.phone}</div>
          </div>
        </div>
      `).join('');
    }
    
    function installApp(appId) {
      const app = appStoreApps.find(a => a.id === appId);
      if (app && !installedApps.includes(appId)) {
        installedApps.push(appId);
        addNotification('App Installed', `${app.name} has been installed`, 'appstore');
        
        // In a real implementation, we would add the app to the home screen
        alert(`${app.name} has been installed!`);
      } else {
        alert(`${app.name} is already installed`);
      }
    }
    
    function viewContact(name) {
      const contact = contactsData.find(c => c.name === name);
      if (contact) {
        document.getElementById('appContent').innerHTML = `
          <div style="padding: 20px; text-align: center;">
            <div style="font-size: 60px; margin-bottom: 20px;">${contact.avatar}</div>
            <h2 style="margin-bottom: 5px;">${contact.name}</h2>
            <div style="margin-bottom: 30px; color: rgba(255,255,255,0.7);">Contact</div>
            
            <div style="background: rgba(255,255,255,0.1); border-radius: 10px; padding: 15px; text-align: left; margin-bottom: 15px;">
              <div style="color: rgba(255,255,255,0.7); font-size: 14px; margin-bottom: 5px;">Phone</div>
              <div style="font-size: 18px;">${contact.phone}</div>
            </div>
            
            <div style="background: rgba(255,255,255,0.1); border-radius: 10px; padding: 15px; text-align: left; margin-bottom: 15px;">
              <div style="color: rgba(255,255,255,0.7); font-size: 14px; margin-bottom: 5px;">Email</div>
              <div style="font-size: 18px;">${contact.email}</div>
            </div>
            
            <button style="width: 100%; background: #4CD964; border: none; border-radius: 10px; padding: 15px; color: white; font-size: 16px; margin-top: 20px; cursor: pointer;" onclick="callContact('${contact.phone}')">
              Call
            </button>
          </div>
        `;
      }
    }
    
    function callContact(phone) {
      addNotification('Calling', `Calling ${phone}`, 'phone');
      closeApp();
    }
    
    function openFolder(folder) {
      addNotification('Files', `Opening ${folder} folder`, 'files');
      // In a real implementation, we would show the folder contents
    }
    
    function createNewFolder() {
      const folderName = prompt('Enter folder name:');
      if (folderName) {
        addNotification('Files', `Created folder: ${folderName}`, 'files');
      }
    }
    
    function takePhoto() {
      // Simulate taking a photo
      const newPhoto = photos[Math.floor(Math.random() * photos.length)];
      photos.unshift(newPhoto); // Add to beginning of array
      
      addNotification('Camera', 'Photo captured', 'camera');
      openApp('photos');
    }
    
    function switchCamera() {
      addNotification('Camera', 'Switching camera', 'camera');
    }
    
    function showFilters() {
      addNotification('Camera', 'Showing filters', 'camera');
    }
    
    function viewPhoto(index) {
      document.getElementById('photoViewer').style.display = 'flex';
      document.getElementById('viewedPhoto').src = photos[index];
    }
    
    function closePhotoViewer() {
      document.getElementById('photoViewer').style.display = 'none';
    }
    
    function showDayEvents(day) {
      const now = new Date();
      const dayDate = new Date(now.getFullYear(), now.getMonth(), day);
      
      const dayEvents = calendarEvents.filter(event => 
        event.date.getDate() === dayDate.getDate() && 
        event.date.getMonth() === dayDate.getMonth() && 
        event.date.getFullYear() === dayDate.getFullYear()
      );
      
      if (dayEvents.length > 0) {
        document.getElementById('appContent').innerHTML = `
          <div style="padding: 15px;">
            <h2 style="margin-bottom: 20px;">Events for ${dayDate.toLocaleDateString()}</h2>
            
            ${dayEvents.map(event => `
              <div style="background: rgba(255,255,255,0.1); border-radius: 10px; padding: 15px; margin-bottom: 10px;">
                <div style="font-weight: bold; margin-bottom: 5px;">${event.title}</div>
                <div style="font-size: 14px; color: rgba(255,255,255,0.7);">${event.time} ${event.location ? '• ' + event.location : ''}</div>
              </div>
            `).join('')}
            
            <button style="width: 100%; background: rgba(255,255,255,0.1); border: none; border-radius: 10px; padding: 12px; color: white; margin-top: 20px;" onclick="openApp('calendar')">
              Back to Calendar
            </button>
          </div>
        `;
      } else {
        document.getElementById('appContent').innerHTML = `
          <div style="padding: 15px; text-align: center;">
            <h2 style="margin-bottom: 20px;">No events for ${dayDate.toLocaleDateString()}</h2>
            <button style="width: 100%; background: rgba(255,255,255,0.1); border: none; border-radius: 10px; padding: 12px; color: white; margin-top: 20px;" onclick="openApp('calendar')">
              Back to Calendar
            </button>
          </div>
        `;
      }
    }
    
    function togglePlay() {
      const button = document.querySelector('.music-control:nth-child(2)');
      if (button.innerHTML.includes('fa-play')) {
        button.innerHTML = '<i class="fas fa-pause"></i>';
        addNotification('Music', 'Playback started', 'music');
      } else {
        button.innerHTML = '<i class="fas fa-play"></i>';
        addNotification('Music', 'Playback paused', 'music');
      }
    }
    
    function skipPrevious() {
      addNotification('Music', 'Skipping to previous track', 'music');
    }
    
    function skipNext() {
      addNotification('Music', 'Skipping to next track', 'music');
    }
    
    function setPowerMode(mode) {
      document.querySelectorAll('.battery-mode').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
      addNotification('Battery', `Power mode set to ${mode}`, 'battery');
    }
    
    function sendMessage() {
      const input = document.querySelector('.message-input input');
      if (input.value.trim() !== '') {
        const messagesList = document.querySelector('.messages-list');
        const newMessage = document.createElement('div');
        newMessage.className = 'message me';
        newMessage.textContent = input.value;
        messagesList.appendChild(newMessage);
        input.value = '';
        
        // Scroll to bottom
        messagesList.scrollTop = messagesList.scrollHeight;
        
        // Simulate reply
        setTimeout(() => {
          const reply = document.createElement('div');
          reply.className = 'message';
          reply.textContent = 'Thanks for your message!';
          messagesList.appendChild(reply);
          messagesList.scrollTop = messagesList.scrollHeight;
        }, 1000);
      }
    }
    
    function dialNumber(number) {
      // In a real app, this would add to the dialer input
      console.log(`Dialing ${number}`);
    }
    
    function callNumber() {
      addNotification('Phone', 'Calling +1 (555) 123-4567...', 'phone');
      closeApp();
    }
    
    function loadBrowserUrl() {
      const urlInput = document.querySelector('.browser-url');
      let url = urlInput.value;
      
      // Add https:// if not present
      if (!url.startsWith('http://') && !url.startsWith('https://')) {
        url = 'https://' + url;
      }
      
      // Update iframe source
      document.querySelector('.browser-iframe').src = url;
    }
    
    function getAppIcon(appName) {
      const icons = {
        'mail': '<i class="fas fa-envelope"></i>',
        'photos': '<i class="fas fa-images"></i>',
        'camera': '<i class="fas fa-camera"></i>',
        'maps': '<i class="fas fa-map"></i>',
        'weather': '<i class="fas fa-sun"></i>',
        'music': '<i class="fas fa-music"></i>',
        'calculator': '<i class="fas fa-calculator"></i>',
        'notes': '<i class="fas fa-sticky-note"></i>',
        'calendar': '<i class="fas fa-calendar"></i>',
        'appstore': '<i class="fas fa-shopping-bag"></i>',
        'files': '<i class="fas fa-folder"></i>',
        'contacts': '<i class="fas fa-user"></i>',
        'battery': '<i class="fas fa-battery-full"></i>',
        'voice-memos': '<i class="fas fa-microphone"></i>'
      };
      return icons[appName] || '<i class="fas fa-mobile-alt"></i>';
    }
    
    function closeApp() {
      document.getElementById('appWindow').classList.remove('active');
      setTimeout(() => {
        document.getElementById('appWindow').style.display = 'none';
        document.getElementById('homeScreen').style.display = 'flex';
        currentApp = null;
      }, 300);
    }
    
    // Folder functions
    function openFolder(folderId) {
      event.stopPropagation();
      document.getElementById(folderId).style.display = 'grid';
    }
    
    function closeFolder(folderId) {
      document.getElementById(folderId).style.display = 'none';
    }
    
    // App Switcher functions
    function showAppSwitcher() {
      if (isLocked) return;
      
      document.getElementById('appSwitcher').style.display = 'flex';
      document.getElementById('appSwitcher').innerHTML = `
        <div class="app-switcher-cards">
          ${openApps.map(app => `
            <div class="app-switcher-card" onclick="switchToApp('${app}')">
              <div class="app-switcher-screenshot" style="background: #111; display: flex; align-items: center; justify-content: center; font-size: 50px;">
                ${getAppIcon(app)}
              </div>
              <div class="app-switcher-close" onclick="closeAppFromSwitcher('${app}', event)"><i class="fas fa-times"></i></div>
            </div>
          `).join('')}
        </div>
        <button class="app-switcher-done" onclick="hideAppSwitcher()">Done</button>
      `;
    }
    
    function hideAppSwitcher() {
      document.getElementById('appSwitcher').style.display = 'none';
    }
    
    function switchToApp(appName) {
      hideAppSwitcher();
      openApp(appName);
    }
    
    function closeAppFromSwitcher(appName, event) {
      event.stopPropagation();
      openApps = openApps.filter(app => app !== appName);
      showAppSwitcher();
    }
    
    // Notification functions
    function addNotification(title, message, app) {
      const notification = {
        id: Date.now(),
        title,
        message,
        app,
        time: new Date()
      };
      
      notifications.unshift(notification);
      updateNotificationCenter();
      updateLockScreenNotifications();
      
      // Show notification badge
      const appIcon = document.querySelector(`.app-icon[onclick="openApp('${app}')"]`);
      if (appIcon) {
        const existingBadge = appIcon.querySelector('.notification-badge');
        if (existingBadge) {
          existingBadge.textContent = parseInt(existingBadge.textContent) + 1;
        } else {
          const badge = document.createElement('div');
          badge.className = 'notification-badge';
          badge.textContent = '1';
          badge.style.position = 'absolute';
          badge.style.top = '-5px';
          badge.style.right = '-5px';
          badge.style.background = 'red';
          badge.style.color = 'white';
          badge.style.borderRadius = '50%';
          badge.style.width = '20px';
          badge.style.height = '20px';
          badge.style.display = 'flex';
          badge.style.alignItems = 'center';
          badge.style.justifyContent = 'center';
          badge.style.fontSize = '12px';
          appIcon.style.position = 'relative';
          appIcon.appendChild(badge);
        }
      }
    }
    
    function updateNotificationCenter() {
      const notificationList = document.getElementById('notificationList');
      notificationList.innerHTML = '';
      
      if (notifications.length === 0) {
        notificationList.innerHTML = '<div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.5);">No notifications</div>';
        return;
      }
      
      notifications.forEach(notif => {
        const notifElement = document.createElement('div');
        notifElement.className = 'notification-item';
        notifElement.innerHTML = `
          <div class="notification-app">
            <div class="notification-app-icon">${notif.app.charAt(0).toUpperCase()}</div>
            ${notif.title}
          </div>
          <div class="notification-message">${notif.message}</div>
          <div class="notification-time">${formatTime(notif.time)}</div>
        `;
        notificationList.appendChild(notifElement);
      });
    }
    
    function formatTime(date) {
      return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    }
    
    function clearNotifications() {
      notifications = [];
      updateNotificationCenter();
      updateLockScreenNotifications();
      
      // Remove all notification badges
      document.querySelectorAll('.notification-badge').forEach(badge => {
        badge.remove();
      });
    }
    
    function showNotificationCenter() {
      if (currentApp !== null || isLocked) return; // Don't show if an app is open or phone is locked
      
      document.getElementById('notificationCenter').style.display = 'flex';
      setTimeout(() => {
        document.getElementById('notificationCenter').classList.add('active');
      }, 10);
    }
    
    function hideNotificationCenter() {
      document.getElementById('notificationCenter').classList.remove('active');
      setTimeout(() => {
        document.getElementById('notificationCenter').style.display = 'none';
      }, 300);
    }
    
    // Control Center functions
    function showControlCenter() {
      if (currentApp !== null || isLocked) return; // Don't show if an app is open or phone is locked
      
      document.getElementById('controlCenter').style.display = 'flex';
      setTimeout(() => {
        document.getElementById('controlCenter').classList.add('active');
      }, 10);
    }
    
    function hideControlCenter() {
      document.getElementById('controlCenter').classList.remove('active');
      setTimeout(() => {
        document.getElementById('controlCenter').style.display = 'none';
      }, 300);
    }
    
    function toggleSetting(setting) {
      const toggle = document.getElementById(`${setting}Toggle`);
      if (toggle) {
        toggle.classList.toggle('on');
      }
      
      // Add notification about the change
      let settingName = '';
      let newState = '';
      
      switch(setting) {
        case 'wifi':
          settingName = 'Wi-Fi';
          newState = toggle.classList.contains('on') ? 'On' : 'Off';
          break;
        case 'bluetooth':
          settingName = 'Bluetooth';
          newState = toggle.classList.contains('on') ? 'On' : 'Off';
          break;
        case 'darkmode':
          settingName = 'Dark Mode';
          newState = toggle.classList.contains('on') ? 'Enabled' : 'Disabled';
          document.body.classList.toggle('dark-mode');
          break;
      }
      
      if (settingName) {
        addNotification(settingName, `${settingName} is now ${newState}`, 'system');
      }
    }
    
    // Touch handling for mobile
    function handleTouchStart(e) {
      if (!isMobile) return;
      
      touchStartX = e.touches[0].clientX;
      touchStartY = e.touches[0].clientY;
    }
    
    function handleTouchMove(e) {
      if (!isMobile || currentApp !== null || isLocked) return;
      
      const touchX = e.touches[0].clientX;
      const touchY = e.touches[0].clientY;
      const deltaX = touchX - touchStartX;
      const deltaY = touchY - touchStartY;
      
      // Check if it's primarily a vertical swipe
      if (Math.abs(deltaY) > Math.abs(deltaX)) {
        // Swipe down from top - show notification center
        if (deltaY > 50 && touchStartY < 100) {
          showNotificationCenter();
        }
        // Swipe up from bottom - show control center
        else if (deltaY < -50 && touchStartY > window.innerHeight - 100) {
          showControlCenter();
        }
      }
      // Horizontal swipe for app switcher
      else if (Math.abs(deltaX) > 50 && touchStartY > window.innerHeight - 100) {
        showAppSwitcher();
      }
    }
    
    // Privacy Dashboard
    function showPrivacyDashboard() {
      document.getElementById('appContent').innerHTML = `
        <div class="privacy-dashboard">
          <h2 style="padding: 15px;">Privacy Dashboard</h2>
          
          <div style="background: rgba(255,255,255,0.1); border-radius: 10px; padding: 15px; margin: 15px;">
            <div style="font-weight: bold; margin-bottom: 10px;">Recent Activity</div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
              <span>Camera</span>
              <span>Today, 2:45 PM</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
              <span>Location</span>
              <span>Today, 1:30 PM</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <span>Microphone</span>
              <span>Yesterday, 5:20 PM</span>
            </div>
          </div>
          
          <div style="background: rgba(255,255,255,0.1); border-radius: 10px; padding: 15px; margin: 15px;">
            <div style="font-weight: bold; margin-bottom: 10px;">App Permissions</div>
            
            <div class="privacy-item" onclick="showAppPermissions('camera')">
              <div class="privacy-item-icon"><i class="fas fa-camera"></i></div>
              <div style="flex: 1;">Camera</div>
              <div>3 apps</div>
            </div>
            
            <div class="privacy-item" onclick="showAppPermissions('location')">
              <div class="privacy-item-icon"><i class="fas fa-map-marker-alt"></i></div>
              <div style="flex: 1;">Location</div>
              <div>5 apps</div>
            </div>
            
            <div class="privacy-item" onclick="showAppPermissions('microphone')">
              <div class="privacy-item-icon"><i class="fas fa-microphone"></i></div>
              <div style="flex: 1;">Microphone</div>
              <div>2 apps</div>
            </div>
            
            <div class="privacy-item" onclick="showAppPermissions('photos')">
              <div class="privacy-item-icon"><i class="fas fa-photo-video"></i></div>
              <div style="flex: 1;">Photos</div>
              <div>4 apps</div>
            </div>
          </div>
        </div>
      `;
    }
    
    function showAppPermissions(permission) {
      const apps = {
        'camera': ['Camera', 'Instagram', 'Snapchat'],
        'location': ['Maps', 'Weather', 'Uber', 'Instagram', 'Facebook'],
        'microphone': ['Voice Memos', 'Phone'],
        'photos': ['Photos', 'Instagram', 'Facebook', 'WhatsApp']
      };
      
      document.getElementById('appContent').innerHTML = `
        <div style="padding: 15px;">
          <h2 style="margin-bottom: 20px;">Apps with ${permission} Access</h2>
          
          ${apps[permission].map(app => `
            <div style="display: flex; align-items: center; padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.1);">
              <div style="width: 40px; height: 40px; background: rgba(255,255,255,0.1); border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                <i class="fas fa-${permission === 'location' ? 'map-marker-alt' : permission === 'photos' ? 'photo-video' : permission}"></i>
              </div>
              <div style="flex: 1;">${app}</div>
              <div class="toggle-switch on"></div>
            </div>
          `).join('')}
          
          <button style="width: 100%; background: rgba(255,255,255,0.1); border: none; border-radius: 10px; padding: 12px; color: white; margin-top: 20px;" onclick="showPrivacyDashboard()">
            Back
          </button>
        </div>
      `;
    }
    
    function changeRingtone() {
      addNotification('Settings', 'Opening ringtone selection', 'settings');
    }
    
    // Start boot sequence when simulation starts
    function startSimulation() {
      document.getElementById('launchPage').style.display = 'none';
      document.getElementById('phoneSimulation').style.display = 'block';
      bootSystem();
    }
    
    // Add some sample notifications after setup
    setTimeout(() => {
      addNotification('Welcome', 'Welcome to VendaOS! Explore your new operating system.', 'system');
      addNotification('Update Available', 'VendaOS 2.0 is ready to install', 'settings');
      addNotification('New Message', 'Hello there! How are you?', 'messages');
    }, 5000);
  </script>
</body>
</html>